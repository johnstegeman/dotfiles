add_newline = true
format = "$os $directory$python$direnv$status$fill${custom.git_branch}${git_status}${custom.jj}$line_break$character"
palette = "osaka"

[fill]
symbol = " "

[directory]
format = "[$path]($style)"
style = "fg:base06 bg:bg01"
truncate_to_repo = false
truncation_length = 5

[git_branch]
format = "[[ $symbol $branch](fg:palette2 bg:bg01)]($style)"
style = "bg:bg01 fg:palette2"
symbol = "î‚ "

[git_status]
ahead = " â‡¡${count}"
behind = " â‡£${count}"
deleted = "[ x${count}](fg:palette2 bg:bg01)"
format = " $untracked$modified$staged$deleted"
modified = "[ !${count}](fg:palette3 bg:bg01)"
staged = "[ +${count}](fg:palette2 bg:bg01)"
untracked = "[ ?${count}](fg:base06 bg:bg01)"

#[custom.git_status]
#when = "! jj --ignore-working-copy root"
#command = "starship module git_status"
#description = "Only show git_status if we're not in a jj repo"

[custom.git_commit]
when = "! jj --ignore-working-copy root"
command = "starship module git_commit"
description = "Only show git_commit if we're not in a jj repo"

[custom.git_branch]
when = "! jj --ignore-working-copy root"
command = "starship module git_branch"
description = "Only show git_branch if we're not in a jj repo"

[hostname]
ssh_only = false

[os]
disabled = false
format = "[$symbol ]($style)"
style = "bg:bg01 fg:base06"

[os.symbols]
Macos = "ïŒ‚"
Ubuntu = "ïŒ›"

[palettes.osaka]
base0 = "#839395"
base01 = "#002c38"
base02 = "#268bd3"
base03 = "#001419"
base04 = "#849900"
base05 = "#db302d"
base06 = "#6d71c4"
base07 = "#d23681"
bg01 = "#1a1b25"
palette0 = "#15161d"
palette1 = "#e77d8f"
palette10 = "#a8cd76"
palette11 = "#d8b172"
palette12 = "#82a1f1"
palette13 = "#b69bf1"
palette14 = "#90cdfa"
palette15 = "#c2caf1"
palette2 = "#a8cd76"
palette3 = "#d8b172"
palette4 = "#82a1f1"
palette5 = "#b69bf1"
palette6 = "#90cdfa"
palette7 = "#aab1d3"
palette8 = "#424866"
palette9 = "#e77d8f"

[python]
format = "[ $symbol$pyenv_prefix($version)(\\($virtualenv\\))]($style)"
style = "bg:bg01 fg:base02"
symbol = "î˜†"

# custom module for jj status
[custom.jj]
description = "The current jj status"
when = "jj --ignore-working-copy root"
symbol = " "
command = '''
jj log --revisions @ --no-graph --ignore-working-copy --color always --limit 1 --template '
  separate(" ",
    change_id.shortest(4),
    bookmarks,
    "|",
    concat(
      if(conflict, "ðŸ’¥"),
      if(divergent, "ðŸš§"),
      if(hidden, "ðŸ‘»"),
      if(immutable, "ðŸ”’"),
    ),
    raw_escape_sequence("\x1b[1;32m") ++ if(empty, "â›”"),
    raw_escape_sequence("\x1b[1;32m") ++ coalesce(
      truncate_end(29, description.first_line(), "â€¦"),
      "(no desc)",
    ) ++ raw_escape_sequence("\x1b[0m"),
  )
'
'''