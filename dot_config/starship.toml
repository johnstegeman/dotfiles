add_newline = true
#format = "$os $directory$python$direnv$status$fill${custom.git_branch}${custom.git_status}${custom.starship-jj}$line_break$character"
format = "$jujutsu_state$jujutsu_bookmark$jujutsu_closest_bookmarks$jujutsu_metrics$jujutsu_commit$jujutsu_change"
#format = "$vcs"
palette = "rose-pine"

[vcs]
git_modules = "$git_branch$git_metrics$git_status"
jujutsu_modules = "$jujutsu_state$jujutsu_bookmark$jujutsu_closest_bookmarks$jujutsu_commit$jujutsu_change"
order = ["jujutsu", "git"]

[jujutsu_change]
disabled = false

[jujutsu_commit]
disabled = false

[jujutsu_status]
disabled = false

[jujutsu_state]
disabled = false

[jujutsu_bookmark]
disabled = false

[jujutsu_closest_bookmarks]
disabled = false

[git_metrics]
disabled = false

[fill]
symbol = " "

[directory]
format = "[$path]($style)"
style = "fg:iris"
truncate_to_repo = false
truncation_length = 5

[git_branch]
format = "[[ $symbol $branch](fg:foam)]($style)"
style = "fg:foam"
symbol = "ÓÇ†"

[git_status]
ahead = " ‚á°${count}"
behind = " ‚á£${count}"
deleted = "[ x${count}](fg:love)"
format = " $untracked$modified$staged$deleted"
modified = "[ !${count}](fg:iris)"
staged = "[ +${count}](fg:pine)"
untracked = "[ ?${count}](fg:gold)"

[custom.git_status]
when = "! jj --ignore-working-copy root"
command = "starship module git_status"
description = "Only show git_status if we're not in a jj repo"

[custom.git_commit]
shell = ["sh", "--norc"]
when = "! jj --ignore-working-copy root"
command = "starship module git_commit"
description = "Only show git_commit if we're not in a jj repo"

[custom.git_branch]
shell = ["sh", "--norc"]
when = "! jj --ignore-working-copy root"
command = "starship module git_branch"
description = "Only show git_branch if we're not in a jj repo"

[hostname]
ssh_only = false

[os]
disabled = false
format = "[$symbol ]($style)"
style = "fg:text"

[os.symbols]
Macos = "ÔåÇ"
Ubuntu = "Ôåõ"

[palettes.osaka]
base0 = "#839395"
base01 = "#002c38"
base02 = "#268bd3"
base03 = "#001419"
base04 = "#849900"
base05 = "#db302d"
base06 = "#6d71c4"
base07 = "#d23681"
bg01 = "#1a1b25"
palette0 = "#15161d"
palette1 = "#e77d8f"
palette10 = "#a8cd76"
palette11 = "#d8b172"
palette12 = "#82a1f1"
palette13 = "#b69bf1"
palette14 = "#90cdfa"
palette15 = "#c2caf1"
palette2 = "#a8cd76"
palette3 = "#d8b172"
palette4 = "#82a1f1"
palette5 = "#b69bf1"
palette6 = "#90cdfa"
palette7 = "#aab1d3"
palette8 = "#424866"
palette9 = "#e77d8f"


[palettes.rose-pine]
overlay = '#26233a'
love = '#eb6f92'
gold = '#f6c177'
rose = '#ebbcba'
pine = '#31748f'
foam = '#9ccfd8'
iris = '#c4a7e7'
text = '#e0def4'

[python]
format = "[ $symbol$pyenv_prefix($version)(\\($virtualenv\\))]($style)"
style = "pine"
symbol = "ÓòÜ"

# custom module for jj status
[custom.jj]
shell = ["sh", "--norc"]
description = "The current jj status"
when = "jj --ignore-working-copy root"
symbol = " "
command = '''
jj log --revisions @ --no-graph --ignore-working-copy --color always --limit 1 --template '
  separate(" ",
    change_id.shortest(4),
    bookmarks,
    "|",
    concat(
      if(conflict, "üí•"),
      if(divergent, "üöß"),
      if(hidden, "üëª"),
      if(immutable, "üîí"),
    ),
    raw_escape_sequence("\x1b[1;32m") ++ if(empty, "‚õî"),
    raw_escape_sequence("\x1b[1;32m") ++ coalesce(
      truncate_end(29, description.first_line(), "‚Ä¶"),
      "(no desc)",
    ) ++ raw_escape_sequence("\x1b[0m"),
  )
'
'''

[custom.starship-jj]
when = "true"
shell = ["sh", "--norc"]
# Use starship-jj from PATH (typically in ~/.cargo/bin or system PATH)
command = "starship-jj --ignore-working-copy starship prompt"

[character]
success_symbol = '[‚ùØ](foam) '
error_symbol = '[‚ùØ](love) '
